(()=>{"use strict";function e(e,t,n,r){var o,i={card:o=document.querySelector("#card-template").content.cloneNode(!0),image:o.querySelector(".card__image"),title:o.querySelector(".card__title"),buttons:{delete:o.querySelector(".card__delete-button"),like:o.querySelector(".card__like-button")}},c=i.image;return c.setAttribute("src",e.link),c.setAttribute("alt",e.name),c.addEventListener("click",n),i.title.textContent=e.name,i.buttons.delete.addEventListener("click",t),i.buttons.like.addEventListener("click",r),i}function t(e){e.target.closest(".card").remove()}function n(e){e.target.classList.toggle("card__like-button_is-active")}function r(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{overlay_click:(t=e,function(e){e.target===t.modalWindow&&i(t)}),key_esc_down:l(e),close_button_click:c(e),submit:n}}function o(e){var t=e.handlers,n=e.modalWindow,r=e.buttons;n.classList.add("popup_is-opened"),n.addEventListener("click",t.overlay_click),document.addEventListener("keydown",t.key_esc_down),r.close.addEventListener("click",t.close_button_click),t.submit&&e.form.addEventListener("submit",t.submit)}function i(e){var t=e.handlers,n=e.modalWindow,r=e.buttons;n.classList.remove("popup_is-opened"),n.removeEventListener("click",t.overlay_click),r.close.removeEventListener("click",t.close_button_click),document.removeEventListener("keydown",t.key_esc_down),t.submit&&e.form.removeEventListener("submit",t.submit)}function c(e){return function(){return i(e)}}function l(e){return function(t){27===t.keyCode&&i(e)}}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function a(e,t,n){return(t=function(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s,d,p,m=document.querySelector(".places__list"),_=document.querySelector(".profile__add-button"),f={EDIT:"edit",NEW_CARD:"new_card",IMAGE:"image"},y=a(a(a({},f.EDIT,((d={modalWindow:s=document.querySelector(".popup_type_edit"),form:s.querySelector(".popup__form"),fields:{name:s.querySelector(".popup__input_type_name"),description:s.querySelector(".popup__input_type_description")},buttons:{close:s.querySelector(".popup__close")}}).handlers=r(d,(function(e){e.preventDefault();var t=y[f.EDIT];n=t.fields.name.value,r=t.fields.description.value,v.fields.name.textContent=n,v.fields.description.textContent=r,i(t);var n,r})),d)),f.NEW_CARD,function(){var e=document.querySelector(".popup_type_new-card"),t={modalWindow:e,form:e.querySelector(".popup__form"),fields:{place_name:e.querySelector(".popup__input_type_card-name"),link:e.querySelector(".popup__input_type_url")},buttons:{close:e.querySelector(".popup__close")}};return t.handlers=r(t,b),t}()),f.IMAGE,function(){var e=document.querySelector(".popup_type_image"),t={modalWindow:e,items:{image:e.querySelector(".popup__image"),caption:e.querySelector(".popup__caption")},buttons:{close:e.querySelector(".popup__close")},handlers:r(e)};return t.handlers=r(t),t}()),v={fields:{name:(p=document.querySelector(".profile__info")).querySelector(".profile__title"),description:p.querySelector(".profile__description")}};function b(r){var o,c;r.preventDefault(),o=y[f.NEW_CARD],c=e({name:o.fields.place_name.value,link:o.fields.link.value},t,k,n),m.prepend(c.card),o.fields.place_name.value="",o.fields.link.value="",i(o)}function k(e){var t=e.target,n=t.getAttribute("src"),r=t.getAttribute("alt"),i=y[f.IMAGE];i.items.image.setAttribute("src",n),i.items.image.setAttribute("alt",r),i.items.caption.textContent=r,o(i)}_.addEventListener("click",(function(e){o(y[f.NEW_CARD])})),document.querySelector(".profile__edit-button").addEventListener("click",(function(e){var t,n,r;t=v.fields.name.textContent,n=v.fields.description.textContent,(r=y[f.EDIT]).fields.name.value=t,r.fields.description.value=n,o(r)})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(r){var o=e(r,t,k,n);m.append(o.card)}))})();